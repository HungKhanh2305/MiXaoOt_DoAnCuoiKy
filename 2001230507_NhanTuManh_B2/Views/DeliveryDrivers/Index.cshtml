@model IEnumerable<_2001230507_NhanTuManh_B2.Models.DeliveryDriver>

@{
    ViewBag.Title = "Quản lý tài xế giao hàng";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container mt-4 admin-container">
    <h1 class="text-gradient mb-4">
        <i class="fas fa-biking"></i> @ViewBag.Title
    </h1>

    <div class="d-flex justify-content-between align-items-center mb-3">
        <a href="@Url.Action("Create")" class="btn btn-admin btn-admin-primary">
            <i class="fas fa-user-plus"></i> Thêm tài xế mới
        </a>
    </div>

    <div class="admin-table">
        <table class="table table-striped table-hover align-middle">
            <thead class="table-light">
                <tr>
                    <th>Họ tên</th>
                    <th>Liên hệ</th>
                    <th>Phương tiện & Biển số</th>
                    <th>Trạng thái</th>
                    <th class="text-center">Thao tác</th>
                </tr>
            </thead>
            <tbody>
                @if (Model != null && Model.Any())
                {
                    foreach (var item in Model)
                    {
                        <tr>
                            <!-- 1. Họ tên -->
                            <td>
                                <div class="d-flex align-items-center">
                                    <div class="avatar-placeholder bg-light text-primary rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <div>
                                        <span class="fw-bold">@item.FirstName @item.LastName</span>
                                        <br />
                                        <small class="text-muted">ID: @item.DriverID</small>
                                    </div>
                                </div>
                            </td>

                            <!-- 2. Liên hệ (SĐT & Email) -->
                            <td>
                                <div><i class="fas fa-phone-alt text-success me-2"></i> @item.PhoneNumber</div>
                                @if (!string.IsNullOrEmpty(item.Email))
                                {
                                    <div class="small text-muted"><i class="fas fa-envelope text-secondary me-2"></i> @item.Email</div>
                                }
                            </td>

                            <!-- 3. Phương tiện (Tự động chọn icon Xe máy/Ô tô) -->
                            <td>
                                @{
                                    string vehicleIcon = "fa-motorcycle"; // Mặc định là xe máy
                                    if (!string.IsNullOrEmpty(item.VehicleType) &&
                                       (item.VehicleType.ToLower().Contains("car") || item.VehicleType.ToLower().Contains("ô tô")))
                                    {
                                        vehicleIcon = "fa-car";
                                    }
                                }
                                <div class="d-flex align-items-center">
                                    <div class="me-2 text-info" style="font-size: 1.2rem;">
                                        <i class="fas @vehicleIcon"></i>
                                    </div>
                                    <div>
                                        <strong>@item.VehicleType</strong>
                                        <br />
                                        <span class="badge bg-light text-dark border">@item.LicensePlate</span>
                                    </div>
                                </div>
                            </td>

                            <!-- 4. Trạng thái (Sẵn sàng/Bận) -->
                            <td>
                                @if (item.IsAvailable.GetValueOrDefault())
                                {
                                    <span class="badge bg-success rounded-pill">
                                        <i class="fas fa-check-circle me-1"></i> Sẵn sàng
                                    </span>
                                }
                                else
                                {
                                    <span class="badge bg-secondary rounded-pill">
                                        <i class="fas fa-clock me-1"></i> Đang bận / Off
                                    </span>
                                }
                            </td>

                            <!-- 5. Thao tác -->
                            <td class="table-actions text-center">
                                <a href="@Url.Action("Details", new { id = item.DriverID })"
                                   class="btn btn-sm btn-info btn-icon" title="Chi tiết">
                                    <i class="fas fa-eye"></i>
                                </a>
                                <a href="@Url.Action("Edit", new { id = item.DriverID })"
                                   class="btn btn-sm btn-warning btn-icon" title="Sửa">
                                    <i class="fas fa-edit"></i>
                                </a>
                                <a href="@Url.Action("Delete", new { id = item.DriverID })"
                                   class="btn btn-sm btn-danger btn-icon" title="Xóa">
                                    <i class="fas fa-trash-alt"></i>
                                </a>
                            </td>
                        </tr>
                    }
                }
                else
                {
                    <tr>
                        <td colspan="5" class="text-center py-5 text-muted">
                            <i class="fas fa-helmet-safety fa-3x mb-3"></i>
                            <p>Chưa có tài xế nào trong hệ thống.</p>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>